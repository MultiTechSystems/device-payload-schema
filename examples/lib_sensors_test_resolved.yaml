name: lib_sensors_test
version: 1
endian: big
description: Test schema using lib/sensors definitions
fields:
- name: temperature
  type: s16
  div: 10
  unit: °C
  valid_range:
  - -40
  - 125
  resolution: 0.1
  unece: CEL
  semantic:
    ipso: 3303
- name: humidity
  type: u8
  mult: 0.5
  unit: '%RH'
  valid_range:
  - 0
  - 100
  resolution: 0.5
  unece: P1
  semantic:
    ipso: 3304
- name: pressure
  type: u16
  div: 10
  unit: hPa
  valid_range:
  - 300
  - 1100
  resolution: 0.1
  unece: A97
  semantic:
    ipso: 3323
- name: co2
  type: u16
  unit: ppm
  valid_range:
  - 400
  - 5000
  resolution: 1
  unece: '59'
  description: CO2 concentration
  semantic:
    ipso: 3325
- name: battery
  type: u8
  unit: '%'
  valid_range:
  - 0
  - 100
  resolution: 1
  unece: P1
  description: Battery percentage
  semantic:
    ipso: 3316
- name: distance
  type: u16
  unit: mm
  valid_range:
  - 0
  - 65535
  resolution: 1
  unece: MMT
  description: Distance measurement
  semantic:
    ipso: 3330
- name: pir
  type: u8
  description: PIR motion detected (0=no, 1=yes)
  semantic:
    ipso: 3302
- name: latitude
  type: s24
  div: 10000
  unit: °
  valid_range:
  - -90
  - 90
  resolution: 0.0001
  description: Latitude (3-byte compact)
- name: longitude
  type: s24
  div: 10000
  unit: °
  valid_range:
  - -180
  - 180
  resolution: 0.0001
  description: Longitude (3-byte compact)
test_vectors:
- name: normal_indoor
  description: Normal indoor environmental reading
  payload: 00E7 82 2794 0320 55 05DC 01 07DC02 FFFB02
  expected:
    temperature: 23.1
    humidity: 65.0
    pressure: 1013.2
    co2: 800
    battery: 85
    distance: 1500
    pir: 1
    latitude: 51.5074
    longitude: -0.1278
- name: cold_outdoor
  description: Cold outdoor with low battery
  payload: FF9C A0 267A 01A4 0F 1388 00 077476 005BE2
  expected:
    temperature: -10.0
    humidity: 80.0
    pressure: 985.0
    co2: 420
    battery: 15
    distance: 5000
    pir: 0
    latitude: 48.8566
    longitude: 2.3522
- name: quality_check
  description: Values triggering out_of_range quality flags
  payload: 05DC DC 2EE0 1770 64 0000 00 000000 000000
  expected:
    temperature: 150.0
    humidity: 110.0
    pressure: 1200.0
    co2: 6000
    battery: 100
    distance: 0
    pir: 0
    latitude: 0.0
    longitude: 0.0
  expected_quality:
    temperature: out_of_range
    humidity: out_of_range
    pressure: out_of_range
    co2: out_of_range
    battery: good
    distance: good

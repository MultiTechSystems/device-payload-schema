# https://www.decentlab.com/products/tipping-bucket-rain-gauge-for-lorawan
name: decentlab_dl_tbrg_01
version: 2
endian: big

fields:
  - name: protocol_version
    type: u8
  - name: device_id
    type: u16
  - name: flags
    type: u16

  - flagged:
      field: flags
      groups:
        - bit: 0
          fields:
            - name: precipitation
              type: u16
              unit: "mm"
              # formula: x[0] * this.PARAMETERS.resolution
            - name: precipitation_interval
              type: u16
              unit: "s"
            - name: cumulative_precipitation
              type: u16
              unit: "mm"
              # formula: (x[2] + x[3] * 65536) * this.PARAMETERS.resolution
        - bit: 1
          fields:
            - name: battery_voltage
              type: u16
              div: 1000
              unit: "V"
